"use strict";(self.webpackChunkangular_bill=self.webpackChunkangular_bill||[]).push([[920],{9920:(k,_,s)=>{s.r(_),s.d(_,{BillModule:()=>P});var c=s(6895),p=s(7506),m=s(3256),r=s(433),t=s(8256),d=s(529),g=s(2340),h=s(262),x=s(2843);let f=(()=>{class n{constructor(e){this.http=e}getBills(e){const i=g.N.apiUrl+"bills/"+e,l=new d.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});return this.http.get(i,{headers:l}).pipe((0,h.K)(this.handleHttpError))}saveBill(e){const i=g.N.apiUrl+"bill",l=new d.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});return this.http.post(i,e,{headers:l}).pipe((0,h.K)(this.handleHttpError))}deleteBill(e){const i=g.N.apiUrl+"bill/"+e.id,l=new d.WM({"Content-Type":"application/json","Access-Control-Allow-Origin":"*"});return this.http.delete(i,{headers:l}).pipe((0,h.K)(this.handleHttpError))}handleHttpError(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):e.status&&e.error?console.error(`Backend returned code ${e.status}, body was: ${e.error}`):console.error(e),(0,x._)("Something bad happened; please try again later.")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(d.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const b=function(n){return{red:n}},v=function(n){return{none:n}};function B(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"div",10)(3,"span",11),t._uU(4),t.qZA(),t._UZ(5,"br"),t.TgZ(6,"a",12),t.NdJ("click",function(){const a=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.detail(a))}),t._uU(7),t.qZA()(),t.TgZ(8,"div",13)(9,"b",14)(10,"span",14),t._uU(11,"-"),t.qZA(),t._uU(12),t.qZA()()()()}if(2&n){const e=o.$implicit;t.xp6(4),t.Oqu(e.date_bill),t.xp6(3),t.Oqu(e.observation),t.xp6(2),t.Q6J("ngClass",t.VKq(5,b,e.type>1)),t.xp6(1),t.Q6J("ngClass",t.VKq(7,v,e.type<2)),t.xp6(2),t.hij(" $ ",e.value,"")}}const U=function(){return["/bill/new/"]},T=function(n){return{username:n}},y=function(){return["/"]};function A(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,B,13,9,"div",5),t.TgZ(2,"div",6)(3,"a",7),t._uU(4,"Registrar"),t.qZA(),t.TgZ(5,"a",8),t._uU(6,"Salir"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.bills),t.xp6(2),t.Q6J("routerLink",t.DdM(4,U))("queryParams",t.VKq(5,T,e.username)),t.xp6(2),t.Q6J("routerLink",t.DdM(7,y))}}function M(n,o){1&n&&(t.TgZ(0,"span",19),t._uU(1,"Retiro"),t.qZA())}function w(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1,"Ingreso"),t.qZA())}function q(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",9)(2,"div",10)(3,"span",11),t._uU(4),t.qZA(),t._UZ(5,"br"),t._uU(6),t._UZ(7,"br"),t.YNc(8,M,2,0,"span",15),t.YNc(9,w,2,0,"span",16),t.qZA(),t.TgZ(10,"div",13)(11,"b",14)(12,"span",14),t._uU(13,"-"),t.qZA(),t._uU(14),t.qZA()()(),t.TgZ(15,"div",6)(16,"a",17),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.delete())}),t._uU(17,"Eliminar"),t.qZA(),t.TgZ(18,"a",18),t.NdJ("click",function(){t.CHM(e);const l=t.oxw();return t.KtG(l.close())}),t._uU(19,"Volver"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(4),t.Oqu(e.bill.date_bill),t.xp6(2),t.hij(" ",e.bill.observation," "),t.xp6(2),t.Q6J("ngIf",2==e.bill.type),t.xp6(1),t.Q6J("ngIf",1==e.bill.type),t.xp6(2),t.Q6J("ngClass",t.VKq(7,b,e.bill.type>1)),t.xp6(1),t.Q6J("ngClass",t.VKq(9,v,e.bill.type<2)),t.xp6(2),t.hij(" $ ",e.bill.value,"")}}function O(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"Formato no v\xe1lido"),t.qZA())}const C='.column[_ngcontent-%COMP%]{float:left;width:50%;vertical-align:middle}.row[_ngcontent-%COMP%]{content:"";display:table;clear:both;overflow:hidden;width:100%;border-bottom:1px solid #e1e1e1;padding:10px}.right[_ngcontent-%COMP%]{text-align:right}.top15[_ngcontent-%COMP%]{margin-top:15px}.red[_ngcontent-%COMP%]{color:red}.none[_ngcontent-%COMP%]{display:none}.font10[_ngcontent-%COMP%]{font-size:11px;color:#333}.buttom_div[_ngcontent-%COMP%]{text-align:center;display:block;margin-top:25px}.buttom[_ngcontent-%COMP%], .main_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#8a2be2;color:#e1e1e1;padding:10px 15px;text-decoration:none;border-radius:3px}.main_button[_ngcontent-%COMP%]{padding:10px 15px;text-align:center}.main_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;cursor:pointer}.back[_ngcontent-%COMP%]{background-color:#d1d1d1;color:#333;padding:10px 25px;text-decoration:none;border-radius:3px;margin-left:15px}.input_error[_ngcontent-%COMP%]{border:1px solid red!important}.login_form[_ngcontent-%COMP%]{text-align:left}.user_login[_ngcontent-%COMP%]{border:1px solid #ccc;padding:10px 5px;width:100%;margin-top:3px}.radio[_ngcontent-%COMP%]{padding:8px 0;width:100%}a[_ngcontent-%COMP%]{cursor:pointer}';let Z=(()=>{class n{constructor(e,i,l){this.router=e,this.route=i,this.billService=l,this.username="",this.bills=[],this.bill=new m.n(0,"",0,0,0,""),this.viewList=!0}ngOnInit(){this.route.params.subscribe(e=>{this.username=e.username,this.list()})}list(){this.billService.getBills(this.username).subscribe(e=>{this.bills=e})}detail(e){this.viewList=!1,this.bill=e}close(){this.bill=new m.n(0,"",0,0,0,""),this.viewList=!0}delete(){console.log(this.bill),this.billService.deleteBill(this.bill).subscribe(e=>{this.list(),this.viewList=!0})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bill"]],decls:9,vars:3,consts:[[1,"header",2,"margin-left","10px"],[2,"margin-top","15px","margin-bottom","15px","margin-left","10px"],[2,"margin-left","10px"],["id","invoice-items-details",1,"pt-2"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"buttom_div"],["href","",1,"buttom",3,"routerLink","queryParams"],["href","",1,"buttom","back",3,"routerLink"],[1,"row"],[1,"column"],[1,"font10"],[3,"click"],[1,"column","right","top15"],[3,"ngClass"],["style","color: red;",4,"ngIf"],["style","color: blue;",4,"ngIf"],[1,"buttom",3,"click"],[1,"buttom","back",3,"click"],[2,"color","red"],[2,"color","blue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"b"),t._uU(2,"Bill List"),t.qZA()(),t.TgZ(3,"div",1),t._uU(4),t.qZA(),t._UZ(5,"hr",2),t.TgZ(6,"div",3),t.YNc(7,A,7,8,"div",4),t.YNc(8,q,20,11,"div",4),t.qZA()),2&e&&(t.xp6(4),t.hij(" Listado de bill del usuario: ",i.username,"\n"),t.xp6(3),t.Q6J("ngIf",i.viewList),t.xp6(1),t.Q6J("ngIf",!i.viewList))},dependencies:[c.mk,c.sg,c.O5,p.yS],styles:[C]}),n})();const N=[{path:"",component:Z},{path:"list/:username",component:Z},{path:"new",component:(()=>{class n{constructor(e,i,l,a){this.router=e,this.route=i,this.billService=l,this.formBuilder=a,this.username="",this.form=this.formBuilder.group({description:["",[r.kI.required]],type:["",[r.kI.required]],value:["",[r.kI.required,r.kI.pattern("^[0-9]+(.[0-9]{0,2})?$")]]}),this.malFormato=!1,this.bill=new m.n(0,"",0,0,0,""),this.route.queryParams.subscribe(u=>{this.username=u.username})}ngOnInit(){}validate(e){this.malFormato=!1,e.preventDefault(),this.form.valid?(this.bill.observation=this.form.value.description,this.bill.value=this.form.value.value,this.bill.user_id=1,this.bill.type=this.form.value.type,this.billService.saveBill(this.bill).subscribe(i=>{this.router.navigate(["/bill/list/"+this.username])})):(this.form.markAllAsTouched(),this.malFormato=!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.F0),t.Y36(p.gz),t.Y36(f),t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-bill"]],decls:36,vars:6,consts:[[1,"header",2,"margin-left","10px"],[2,"margin-top","15px","margin-bottom","15px","margin-left","10px"],[2,"margin-left","10px"],["id","invoice-items-details",1,"pt-2"],[1,"login_form",3,"formGroup","ngSubmit"],["formControlName","description","maxlength","200",1,"user_login",3,"ngClass"],["description",""],[1,"radio",3,"ngClass"],["type","radio","value","1","formControlName","type"],["type","radio","value","2","formControlName","type"],["formControlName","value","maxlength","9",1,"user_login",3,"ngClass"],["value",""],[4,"ngIf"],[1,"main_button"],["type","submit"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"b"),t._uU(2,"Bill Add"),t.qZA()(),t.TgZ(3,"div",1),t._uU(4),t.qZA(),t._UZ(5,"hr",2),t.TgZ(6,"div",3)(7,"div")(8,"form",4),t.NdJ("ngSubmit",function(a){return i.validate(a)}),t._UZ(9,"br"),t.TgZ(10,"b"),t._uU(11,"Descripci\xf3n"),t.qZA(),t._UZ(12,"input",5,6)(14,"br")(15,"br"),t.TgZ(16,"b"),t._uU(17,"Tipo de movimiento"),t.qZA(),t._UZ(18,"br")(19,"br"),t.TgZ(20,"div",7),t._UZ(21,"input",8),t.TgZ(22,"span"),t._uU(23,"Ingreso"),t.qZA(),t._UZ(24,"input",9),t.TgZ(25,"span"),t._uU(26,"Gasto"),t.qZA()(),t._UZ(27,"br"),t.TgZ(28,"b"),t._uU(29,"Valor"),t.qZA(),t._UZ(30,"input",10,11),t.YNc(32,O,2,0,"span",12),t.TgZ(33,"div",13)(34,"button",14),t._uU(35,"Registrar"),t.qZA()()()()()),2&e){let l,a,u;t.xp6(4),t.hij(" Registrar Nuevo Movimiento: ",i.username,"\n"),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("ngClass",null!=i.form&&null!=(l=i.form.get("description"))&&l.hasError("required")&&null!=i.form&&null!=(l=i.form.get("description"))&&l.touched?"input_error":""),t.xp6(8),t.Q6J("ngClass",null!=i.form&&null!=(a=i.form.get("type"))&&a.hasError("required")&&null!=i.form&&null!=(a=i.form.get("type"))&&a.touched?"input_error":""),t.xp6(10),t.Q6J("ngClass",null!=i.form&&null!=(u=i.form.get("value"))&&u.hasError("required")&&null!=i.form&&null!=(u=i.form.get("value"))&&u.touched?"input_error":""),t.xp6(2),t.Q6J("ngIf",i.malFormato)}},dependencies:[c.mk,c.O5,r._Y,r.Fj,r._,r.JJ,r.JL,r.nD,r.sg,r.u],styles:[C]}),n})()}];let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(N),p.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,J,r.UX]}),n})()}}]);